<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.nemew.blog.post.dao.BoardDao">


	<resultMap id="resultGetBoard" type="com.nemew.blog.post.model.BoardModel">
		<result property="id" column="ID" />
		<result property="user_id" column="USER_ID" />
		<result property="title" column="TITLE" />
		<result property="content" column="CONTENT" />
		<result property="phone" column="PHONE" />
		<result property="reg_date" column="REG_DATE" />
		<result property="img_url" column="IMG_URL" />
		
	</resultMap>

	<select id="BoardList" resultMap="resultGetBoard">
		SELECT AA.* FROM (
			SELECT ROW_NUMBER() OVER(ORDER BY id ) num, a.* FROM board A  
		)AA 
		
			<if test="keyword != null and keyword != '' ">
					<![CDATA[ where user_id='vjzm44' ]]>
			</if>
			
		order by id desc
		
			<if test="keyword != null and keyword != '' ">
				<![CDATA[ Limit 3 ]]>
			</if>
		
	</select>
	
	<select id="boardDatail" resultType="com.nemew.blog.post.model.BoardModel">
			select * from board 
			where id = #{keyword}
	</select>
	
	<select id="maxIdNum" resultType="int">
			select 
			
			ifnull(a.num,1) as topnum
			
			from (
				select 
				max(id)+1 num
				from board
			)a
			
	</select>
	
	
	<insert id ="boardInsertPost">
		insert into board (
		id,user_id, title,content,phone,reg_date,img_url
		) value (
			#{id},
			#{user_id},
			#{title},
			#{content},
			#{phone},
			#{reg_date},
			#{img_url}
		)
	</insert>
	
	
	
	

</mapper>